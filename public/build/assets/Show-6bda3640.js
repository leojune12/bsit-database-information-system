import{r as C,u as f,a,c as d,b as n,d as i,w as c,F as _,H as A,e as t,t as o,g as u,q as N,B as x,f as V,v as g,x as $,L as D}from"./app-00980844.js";import{_ as F}from"./AuthenticatedLayout-1623c223.js";import{_ as h}from"./LinkComponent-0cedf903.js";import{S as p}from"./sweetalert2.all-aae87526.js";import{_ as R}from"./InputError-bf1d20c0.js";import{_ as j}from"./TextInput-0c948040.js";import{r as I}from"./PlusIcon-1d33c615.js";import"./use-outside-click-d2289df3.js";import"./use-tracked-pointer-56029cb5.js";const L={class:"tw-bg-white tw-shadow-lg tw-border sm:tw-rounded-lg tw-mb-5"},E=t("dl",{class:"tw-px-4 tw-py-5 sm:tw-grid sm:tw-grid-cols-3 sm:tw-gap-4 sm:tw-px-6 tw-border-b-2"},[t("h3",{class:"tw-text-lg tw-font-black tw-leading-6 tw-text-gray-900"},"Section Information")],-1),H={class:"tw-px-4 tw-py-5 sm:tw-grid sm:tw-grid-cols-3 sm:tw-gap-4 sm:tw-px-6 tw-border-b-2"},O=t("dt",{class:"tw-text-sm tw-font-medium tw-text-gray-500"},"Academic Year",-1),T={class:"tw-mt-1 tw-text-sm tw-text-gray-900 sm:tw-col-span-2 sm:tw-mt-0"},q={class:"tw-px-4 tw-py-5 sm:tw-grid sm:tw-grid-cols-3 sm:tw-gap-4 sm:tw-px-6 tw-border-b-2"},z=t("dt",{class:"tw-text-sm tw-font-medium tw-text-gray-500"},"Curriculum",-1),U={class:"tw-mt-1 tw-text-sm tw-text-gray-900 sm:tw-col-span-2 sm:tw-mt-0"},Y={class:"tw-px-4 tw-py-5 sm:tw-grid sm:tw-grid-cols-3 sm:tw-gap-4 sm:tw-px-6 tw-border-b-2"},M=t("dt",{class:"tw-text-sm tw-font-medium tw-text-gray-500"},"Name",-1),P={class:"tw-mt-1 tw-text-sm tw-text-gray-900 sm:tw-col-span-2 sm:tw-mt-0"},G={class:"tw-px-4 tw-py-5 sm:tw-grid sm:tw-grid-cols-3 sm:tw-gap-4 sm:tw-px-6 tw-border-b-2"},J=t("dt",{class:"tw-text-sm tw-font-medium tw-text-gray-500"},"Year",-1),K={class:"tw-mt-1 tw-text-sm tw-text-gray-900 sm:tw-col-span-2 sm:tw-mt-0"},Q={class:"tw-bg-white tw-px-4 tw-py-5 sm:tw-grid sm:tw-grid-cols-3 sm:tw-gap-4 sm:tw-px-6 tw-border-b-2"},W=t("dt",{class:"tw-text-sm tw-font-medium tw-text-gray-500"},"Date Added",-1),X={class:"tw-mt-1 tw-text-sm tw-text-gray-900 sm:tw-col-span-2 sm:tw-mt-0 tw-capitalize"},Z={class:"tw-flex tw-flex-col md:tw-flex-row tw-gap-4 tw-py-6 sm:tw-px-6 tw-px-4"},tt={class:"tw-bg-white tw-shadow-lg tw-border sm:tw-rounded-lg tw-mb-5 tw-px-4 sm:tw-px-6 tw-py-5"},et={class:"tw-flex tw-items-center tw-justify-between tw-mb-3"},st={class:"tw-text-lg tw-font-black tw-leading-6 tw-text-gray-900"},ot={type:"submit",class:"tw-h-11 tw-rounded-l-none tw-flex tw-justify-center tw-items-center tw-px-4 tw-bg-green-600s tw-border-2 tw-border-green-600 tw-rounded-md tw-font-semibold tw-text-xs tw-text-green-600 tw-uppercase tw-tracking-widest hover:tw-bg-green-700 hover:tw-text-white active:tw-text-white focus:tw-text-white focus:tw-bg-green-700 active:tw-bg-green-700 focus:tw-outline-none focus:tw-ring-2 focus:tw-ring-green-500 focus:tw-ring-offset-2 tw-transition tw-ease-in-out tw-duration-150"},wt={class:"tw-overflow-x-auto tw-mb-4"},rt={class:"tw-min-w-full"},at={class:"tw-border tw-bg-rose-700 tw-text-sm tw-font-medium tw-text-white"},dt={class:"border"},nt={class:"tw-px-6 tw-py-3 tw-whitespace-nowrap tw-text-sm tw-font-medium tw-text-gray-900"},it={class:"tw-px-6 tw-py-3 tw-whitespace-nowrap tw-text-sm tw-font-medium tw-text-gray-900"},lt={class:"tw-text-sm tw-text-gray-900 tw-font-light tw-px-6 tw-py-3 tw-whitespace-nowrap"},mt={class:"tw-text-sm tw-text-gray-900 tw-font-light tw-px-6 tw-py-3 tw-whitespace-nowrap"},ct={class:"tw-text-sm tw-text-gray-900 tw-font-light tw-px-6 tw-py-3 tw-whitespace-nowrap"},ut={class:"tw-text-sm tw-text-gray-900 tw-font-light tw-px-6 tw-py-3 tw-whitespace-nowrap"},pt={class:"tw-flex tw-gap-2"},_t=["onClick"],xt={key:1},ft=t("td",{colspan:"6",class:"tw-px-6 tw-py-3 tw-whitespace-nowrap tw-text-sm tw-font-medium tw-text-gray-900 tw-text-center"}," No records ",-1),gt=[ft],Vt={__name:"Show",props:{model:Object,students:Object},setup(y){const e=y,b=C([{title:"ID",class:"tw-py-2 tw-px-6 tw-text-left"},{title:"ID Number",class:"tw-py-2 tw-px-6 tw-text-left"},{title:"First Name",class:"tw-py-2 tw-px-6 tw-text-left"},{title:"Last Name",class:"tw-py-2 tw-px-6 tw-text-left"},{title:"Email",class:"tw-py-2 tw-px-6 tw-text-left"},{title:"Actions",class:"tw-py-2 tw-px-6 tw-text-left"}]),v=f({}),l=f({id_number:null,section_id:e.model.id,curriculum_id:e.model.curriculum_id,year:e.model.year}),m="sections";function k(){l.post("/"+m+"/add-student",{preserveScroll:!0,onSuccess:()=>{p.fire({title:"Added successfully",confirmButtonColor:"#16a34a"}),l.reset("id_number")}})}function S(w){p.fire({title:"Remove student from section?",showCancelButton:!0,confirmButtonColor:"#d33",confirmButtonText:"Remove"}).then(r=>{r.isConfirmed&&B(w)})}function B(w){Array.isArray(w)&&Object.keys(w).map(r=>w[r].id),v.transform(()=>({section_id:e.model.id,curriculum_id:e.model.curriculum_id,year:e.model.year})).delete("/"+m+"/remove-student/"+w,{preserveScroll:!0,onSuccess:()=>{p.fire({title:"Removed successfully",confirmButtonColor:"#16a34a"})},onError:r=>{p.fire({title:"Something went wrong",text:"Please refresh the page.",icon:"error",confirmButtonColor:"#d33"})}})}return(w,r)=>(a(),d(_,null,[n(i(A),{title:"Sections"}),n(F,null,{default:c(()=>[t("div",L,[t("div",null,[E,t("dl",H,[O,t("dd",T,o(e.model.academic_year.name),1)]),t("dl",q,[z,t("dd",U,o(e.model.curriculum.name),1)]),t("dl",Y,[M,t("dd",P,o(e.model.name),1)]),t("dl",G,[J,t("dd",K,o(e.model.year),1)]),t("dl",Q,[W,t("dd",X,o(e.model.date_added),1)])]),t("div",Z,[n(h,{href:"/"+m,type:"secondary"},{default:c(()=>[u(" Back ")]),_:1},8,["href"]),w.$page.props.auth.user.roles[0].name=="Admin"?(a(),N(h,{key:0,href:"/"+m+"/"+e.model.id+"/edit",type:"primary"},{default:c(()=>[u(" Update ")]),_:1},8,["href"])):x("",!0)])]),t("div",tt,[t("div",et,[t("h3",st,"Students ("+o(e.students.length)+")",1),w.$page.props.auth.user.roles[0].name=="Admin"?(a(),d("form",{key:0,onSubmit:r[1]||(r[1]=V(s=>k(),["prevent"])),class:"tw-flex"},[t("div",null,[n(j,{id:"id_number",type:"text",class:"tw-block tw-w-full tw-border-r-0 tw-rounded-r-none",modelValue:i(l).id_number,"onUpdate:modelValue":r[0]||(r[0]=s=>i(l).id_number=s),required:"",autocomplete:"id_number",placeholder:"Type ID Number"},null,8,["modelValue"]),n(R,{class:"tw-mt-2",message:i(l).errors.id_number},null,8,["message"])]),t("button",ot,[n(i(I),{class:"tw-block tw-h-5 tw-w-5","aria-hidden":"true"}),u(" Add ")])],32)):x("",!0)]),t("div",null,[t("div",wt,[t("table",rt,[t("thead",at,[t("tr",null,[(a(!0),d(_,null,g(b.value,s=>(a(),d("th",{key:s.title,class:$(s.class)},o(s.title),3))),128))])]),t("tbody",dt,[e.students.length?(a(!0),d(_,{key:0},g(e.students,s=>(a(),d("tr",{key:s.id,class:"tw-bg-white tw-border-b tw-transition tw-duration-300 tw-ease-in-out hover:tw-bg-gray-100"},[t("td",nt,o(s.id),1),t("td",it,o(s.id_number),1),t("td",lt,o(s.first_name),1),t("td",mt,o(s.last_name),1),t("td",ct,o(s.email),1),t("td",ut,[t("div",pt,[n(i(D),{href:"/students/"+s.id,class:"tw-text-green-500 hover:tw-text-green-600 tw-transition tw-duration-300 tw-ease-in-out",title:"View"},{default:c(()=>[u(" View ")]),_:2},1032,["href"]),w.$page.props.auth.user.roles[0].name=="Admin"?(a(),d("a",{key:0,href:"#",class:"tw-text-red-500 hover:tw-text-red-600 tw-transition tw-duration-300 tw-ease-in-out",title:"Delete",onClick:ht=>S(s.id)}," Remove ",8,_t)):x("",!0)])])]))),128)):(a(),d("tr",xt,gt))])])])])])]),_:1})],64))}};export{Vt as default};
