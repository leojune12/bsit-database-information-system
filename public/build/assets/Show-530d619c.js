import{r as C,u as f,a,c as n,b as d,d as l,w as u,F as p,H as A,e as t,t as o,g as _,q as N,B as x,f as V,s as g,v as $}from"./app-59b56124.js";import{_ as D}from"./AuthenticatedLayout-9c6bd5d9.js";import{_ as h}from"./LinkComponent-f80632ad.js";import{S as c}from"./sweetalert2.all-0d0469c4.js";import{_ as F}from"./InputError-f040ad7f.js";import{_ as R}from"./TextInput-3203dc66.js";import{r as j}from"./PlusIcon-23378a29.js";import"./use-outside-click-a33fe8c4.js";import"./use-tracked-pointer-8a03dc1b.js";const I={class:"tw-bg-white tw-shadow-lg tw-border sm:tw-rounded-lg tw-mb-5"},E=t("dl",{class:"tw-px-4 tw-py-5 sm:tw-grid sm:tw-grid-cols-3 sm:tw-gap-4 sm:tw-px-6 tw-border-b-2"},[t("h3",{class:"tw-text-lg tw-font-black tw-leading-6 tw-text-gray-900"},"Section Information")],-1),H={class:"tw-px-4 tw-py-5 sm:tw-grid sm:tw-grid-cols-3 sm:tw-gap-4 sm:tw-px-6 tw-border-b-2"},O=t("dt",{class:"tw-text-sm tw-font-medium tw-text-gray-500"},"Academic Year",-1),T={class:"tw-mt-1 tw-text-sm tw-text-gray-900 sm:tw-col-span-2 sm:tw-mt-0"},q={class:"tw-px-4 tw-py-5 sm:tw-grid sm:tw-grid-cols-3 sm:tw-gap-4 sm:tw-px-6 tw-border-b-2"},z=t("dt",{class:"tw-text-sm tw-font-medium tw-text-gray-500"},"Curriculum",-1),L={class:"tw-mt-1 tw-text-sm tw-text-gray-900 sm:tw-col-span-2 sm:tw-mt-0"},U={class:"tw-px-4 tw-py-5 sm:tw-grid sm:tw-grid-cols-3 sm:tw-gap-4 sm:tw-px-6 tw-border-b-2"},Y=t("dt",{class:"tw-text-sm tw-font-medium tw-text-gray-500"},"Name",-1),M={class:"tw-mt-1 tw-text-sm tw-text-gray-900 sm:tw-col-span-2 sm:tw-mt-0"},P={class:"tw-px-4 tw-py-5 sm:tw-grid sm:tw-grid-cols-3 sm:tw-gap-4 sm:tw-px-6 tw-border-b-2"},G=t("dt",{class:"tw-text-sm tw-font-medium tw-text-gray-500"},"Year",-1),J={class:"tw-mt-1 tw-text-sm tw-text-gray-900 sm:tw-col-span-2 sm:tw-mt-0"},K={class:"tw-bg-white tw-px-4 tw-py-5 sm:tw-grid sm:tw-grid-cols-3 sm:tw-gap-4 sm:tw-px-6 tw-border-b-2"},Q=t("dt",{class:"tw-text-sm tw-font-medium tw-text-gray-500"},"Date Added",-1),W={class:"tw-mt-1 tw-text-sm tw-text-gray-900 sm:tw-col-span-2 sm:tw-mt-0 tw-capitalize"},X={class:"tw-flex tw-flex-col md:tw-flex-row tw-gap-4 tw-py-6 sm:tw-px-6 tw-px-4"},Z={class:"tw-bg-white tw-shadow-lg tw-border sm:tw-rounded-lg tw-mb-5 tw-px-4 sm:tw-px-6 tw-py-5"},tt={class:"tw-flex tw-items-center tw-justify-between tw-mb-3"},et={class:"tw-text-lg tw-font-black tw-leading-6 tw-text-gray-900"},st={type:"submit",class:"tw-h-11 tw-rounded-l-none tw-flex tw-justify-center tw-items-center tw-px-4 tw-bg-green-600s tw-border-2 tw-border-green-600 tw-rounded-md tw-font-semibold tw-text-xs tw-text-green-600 tw-uppercase tw-tracking-widest hover:tw-bg-green-700 hover:tw-text-white active:tw-text-white focus:tw-text-white focus:tw-bg-green-700 active:tw-bg-green-700 focus:tw-outline-none focus:tw-ring-2 focus:tw-ring-green-500 focus:tw-ring-offset-2 tw-transition tw-ease-in-out tw-duration-150"},ot={class:"tw-overflow-x-auto tw-mb-4"},wt={class:"tw-min-w-full"},rt={class:"tw-border tw-bg-rose-700 tw-text-sm tw-font-medium tw-text-white"},at={class:"border"},nt={class:"tw-px-6 tw-py-3 tw-whitespace-nowrap tw-text-sm tw-font-medium tw-text-gray-900"},dt={class:"tw-px-6 tw-py-3 tw-whitespace-nowrap tw-text-sm tw-font-medium tw-text-gray-900"},it={class:"tw-text-sm tw-text-gray-900 tw-font-light tw-px-6 tw-py-3 tw-whitespace-nowrap"},lt={class:"tw-text-sm tw-text-gray-900 tw-font-light tw-px-6 tw-py-3 tw-whitespace-nowrap"},mt={class:"tw-text-sm tw-text-gray-900 tw-font-light tw-px-6 tw-py-3 tw-whitespace-nowrap"},ct={class:"tw-text-sm tw-text-gray-900 tw-font-light tw-px-6 tw-py-3 tw-whitespace-nowrap"},ut={class:"tw-flex tw-gap-2"},pt=["href"],_t=["onClick"],xt={key:1},ft=t("td",{colspan:"6",class:"tw-px-6 tw-py-3 tw-whitespace-nowrap tw-text-sm tw-font-medium tw-text-gray-900 tw-text-center"}," No records ",-1),gt=[ft],Vt={__name:"Show",props:{model:Object,students:Object},setup(y){const e=y,b=C([{title:"ID",class:"tw-py-2 tw-px-6 tw-text-left"},{title:"ID Number",class:"tw-py-2 tw-px-6 tw-text-left"},{title:"First Name",class:"tw-py-2 tw-px-6 tw-text-left"},{title:"Last Name",class:"tw-py-2 tw-px-6 tw-text-left"},{title:"Email",class:"tw-py-2 tw-px-6 tw-text-left"},{title:"Actions",class:"tw-py-2 tw-px-6 tw-text-left"}]),v=f({}),i=f({id_number:null,section_id:e.model.id,curriculum_id:e.model.curriculum_id,year:e.model.year}),m="sections";function k(){i.post("/"+m+"/add-student",{preserveScroll:!0,onSuccess:()=>{c.fire({title:"Added successfully",confirmButtonColor:"#16a34a"}),i.reset("id_number")}})}function S(w){c.fire({title:"Remove student from section?",showCancelButton:!0,confirmButtonColor:"#d33",confirmButtonText:"Remove"}).then(r=>{r.isConfirmed&&B(w)})}function B(w){Array.isArray(w)&&Object.keys(w).map(r=>w[r].id),v.transform(()=>({section_id:e.model.id,curriculum_id:e.model.curriculum_id,year:e.model.year})).delete("/"+m+"/remove-student/"+w,{preserveScroll:!0,onSuccess:()=>{c.fire({title:"Removed successfully",confirmButtonColor:"#16a34a"})},onError:r=>{c.fire({title:"Something went wrong",text:"Please refresh the page.",icon:"error",confirmButtonColor:"#d33"})}})}return(w,r)=>(a(),n(p,null,[d(l(A),{title:"Sections"}),d(D,null,{default:u(()=>[t("div",I,[t("div",null,[E,t("dl",H,[O,t("dd",T,o(e.model.academic_year.name),1)]),t("dl",q,[z,t("dd",L,o(e.model.curriculum.name),1)]),t("dl",U,[Y,t("dd",M,o(e.model.name),1)]),t("dl",P,[G,t("dd",J,o(e.model.year),1)]),t("dl",K,[Q,t("dd",W,o(e.model.date_added),1)])]),t("div",X,[d(h,{href:"/"+m,type:"secondary"},{default:u(()=>[_(" Back ")]),_:1},8,["href"]),w.$page.props.auth.user.roles[0].name=="Admin"?(a(),N(h,{key:0,href:"/"+m+"/"+e.model.id+"/edit",type:"primary"},{default:u(()=>[_(" Update ")]),_:1},8,["href"])):x("",!0)])]),t("div",Z,[t("div",tt,[t("h3",et,"Students ("+o(e.students.length)+")",1),w.$page.props.auth.user.roles[0].name=="Admin"?(a(),n("form",{key:0,onSubmit:r[1]||(r[1]=V(s=>k(),["prevent"])),class:"tw-flex"},[t("div",null,[d(R,{id:"id_number",type:"text",class:"tw-block tw-w-full tw-border-r-0 tw-rounded-r-none",modelValue:l(i).id_number,"onUpdate:modelValue":r[0]||(r[0]=s=>l(i).id_number=s),required:"",autocomplete:"id_number",placeholder:"Type ID Number"},null,8,["modelValue"]),d(F,{class:"tw-mt-2",message:l(i).errors.id_number},null,8,["message"])]),t("button",st,[d(l(j),{class:"tw-block tw-h-5 tw-w-5","aria-hidden":"true"}),_(" Add ")])],32)):x("",!0)]),t("div",null,[t("div",ot,[t("table",wt,[t("thead",rt,[t("tr",null,[(a(!0),n(p,null,g(b.value,s=>(a(),n("th",{key:s.title,class:$(s.class)},o(s.title),3))),128))])]),t("tbody",at,[e.students.length?(a(!0),n(p,{key:0},g(e.students,s=>(a(),n("tr",{key:s.id,class:"tw-bg-white tw-border-b tw-transition tw-duration-300 tw-ease-in-out hover:tw-bg-gray-100"},[t("td",nt,o(s.id),1),t("td",dt,o(s.id_number),1),t("td",it,o(s.first_name),1),t("td",lt,o(s.last_name),1),t("td",mt,o(s.email),1),t("td",ct,[t("div",ut,[t("a",{target:"_blank",href:"/students/"+s.id,class:"tw-text-green-500 hover:tw-text-green-600 tw-transition tw-duration-300 tw-ease-in-out",title:"View"}," View ",8,pt),w.$page.props.auth.user.roles[0].name=="Admin"?(a(),n("a",{key:0,href:"#",class:"tw-text-red-500 hover:tw-text-red-600 tw-transition tw-duration-300 tw-ease-in-out",title:"Delete",onClick:ht=>S(s.id)}," Remove ",8,_t)):x("",!0)])])]))),128)):(a(),n("tr",xt,gt))])])])])])]),_:1})],64))}};export{Vt as default};
