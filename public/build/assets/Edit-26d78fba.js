import{r as c,u as P,o as M,J as z,a as p,c as f,b as l,d as s,w as V,F as R,H as L,e as o,f as j,t as F,B as v,g as I,h as H}from"./app-c77c7403.js";import{_ as G}from"./AuthenticatedLayout-53a79dcd.js";import{_ as d}from"./InputError-83943ffb.js";import{_ as r}from"./InputLabel-e41b488d.js";import{_ as n}from"./TextInput-fd354bde.js";import{_ as J}from"./PrimaryButton-a61608b0.js";import{_ as K}from"./LinkComponent-914b6c2a.js";import{S as O}from"./sweetalert2.all-2f24bfa7.js";import{_ as y}from"./ListBox-ff10e056.js";import"./use-outside-click-de4d3e2a.js";import"./use-tracked-pointer-bed7fbaa.js";import"./hidden-50d99975.js";import"./ChevronUpDownIcon-7ae066e0.js";const T={class:"tw-bg-white tw-shadow-lg tw-border sm:tw-rounded-lg tw-mb-5 tw-p-4 sm:tw-p-8"},W=o("div",{class:"md:tw-grid md:tw-grid-cols-2"},[o("header",null,[o("h2",{class:"tw-text-xl tw-font-bold tw-text-gray-900"},"Update User")])],-1),Q=o("h3",{class:"tw-text-lg tw-font-bold tw-text-gray-600"}," Profile Information ",-1),X={class:"md:tw-grid md:tw-grid-cols-2 md:tw-gap-x-6 tw-space-y-6 md:tw-space-y-0"},Y={key:0,class:"tw-mb-2"},Z=["src"],ee={key:0},te={class:"tw-mb-0"},le={class:"tw-mb-0"},se={class:"tw-flex tw-gap-3"},ae={class:"md:tw-grid md:tw-grid-cols-2 md:tw-gap-x-6 tw-space-y-6 md:tw-space-y-0"},oe={class:"md:tw-grid md:tw-grid-cols-2 md:tw-gap-x-6 tw-space-y-6 md:tw-space-y-0"},ie={class:"md:tw-grid md:tw-grid-cols-2 md:tw-gap-x-6 tw-space-y-6 md:tw-space-y-0"},de={class:"md:tw-grid md:tw-grid-cols-2 md:tw-gap-x-6 tw-space-y-6 md:tw-space-y-0"},re={class:"md:tw-grid md:tw-grid-cols-2 md:tw-gap-x-6 tw-space-y-6 md:tw-space-y-0"},ne=o("div",{class:"tw-border tw-border-gray-200"},null,-1),me=o("h3",{class:"tw-text-lg tw-font-bold tw-text-gray-600"}," Contact Information ",-1),ue={class:"md:tw-grid md:tw-grid-cols-2 md:tw-gap-x-6 tw-space-y-6 md:tw-space-y-0"},ce=o("div",{class:"tw-border tw-border-gray-200"},null,-1),we=o("h3",{class:"tw-text-xl tw-font-bold tw-text-gray-600"}," Address Information ",-1),pe={class:"md:tw-grid md:tw-grid-cols-2 md:tw-gap-x-6 tw-space-y-6 md:tw-space-y-0"},_e={class:"md:tw-grid md:tw-grid-cols-2 md:tw-gap-x-6 tw-space-y-6 md:tw-space-y-0"},fe=o("div",{class:"tw-border tw-border-gray-200"},null,-1),ge=o("h3",{class:"tw-text-xl tw-font-bold tw-text-gray-600"}," Account Information ",-1),ve={class:"md:tw-grid md:tw-grid-cols-2 md:tw-gap-x-6 tw-space-y-6 md:tw-space-y-0"},ye={key:0,class:"md:tw-grid md:tw-grid-cols-2 md:tw-gap-x-6 tw-space-y-6 md:tw-space-y-0"},be={class:"tw-flex tw-flex-col md:tw-flex-row tw-gap-4"},Ne={__name:"Edit",props:{model:Object,photo_url:String},setup(S){const i=S,b="users",w=c(i.photo_url),e=P({photo:null,remove_photo:!1,first_name:i.model.first_name,last_name:i.model.last_name,middle_name:i.model.middle_name,suffix_name:i.model.suffix_name,gender:i.model.gender,citizenship:i.model.citizenship,religion:i.model.religion,civil_status:i.model.civil_status,date_of_birth:i.model.date_of_birth,place_of_birth:i.model.place_of_birth,email:i.model.email,contact_number:i.model.contact_number,province_id:i.model.province_id,city_id:i.model.city_id,barangay_id:i.model.barangay_id,role:i.model.roles[0].id,password:null,password_confirmation:null,_method:"put"}),U=c([]),k=c([]),q=c([]),x=c(!1),g=c(!1);M(()=>{E(),i.model.city_id&&C(i.model.province_id),i.model.barangay_id&&B(i.model.city_id)}),z(()=>_.cloneDeep(e.province_id),(m,t)=>{C(e.province_id),x.value=!0,g.value=!0,e.city_id=null,e.barangay_id=null}),z(()=>_.cloneDeep(e.city_id),(m,t)=>{B(e.city_id),g.value=!0,e.barangay_id=null});function $(m){let t=m.target;if(t.files.length){let a=new FileReader;a.onload=u=>{w.value=u.target.result},e.photo=t.files[0],a.readAsDataURL(t.files[0]),e.remove_photo=!1}}function N(){document.getElementById("photo").click()}function A(){e.photo=null,w.value=null,e.remove_photo=!0}function D(){e.post(route(b+".update",i.model.id),{preserveScroll:!0,onSuccess:()=>{O.fire({title:"Updated successfully",confirmButtonColor:"#16a34a"}).then(()=>{H.Inertia.get("/"+b)})}})}function E(){axios.get("/address/get-provinces").then(function(m){let t=[];m.data.forEach(a=>{t.push({id:a.provCode,name:h(a.provDesc)})}),U.value=t})}function C(m){axios.get("/address/get-cities-municipalities-per-province/"+m).then(function(t){let a=[];t.data.forEach(u=>{a.push({id:u.citymunCode,name:h(u.citymunDesc)})}),k.value=a})}function B(m){axios.get("/address/get-barangays-per-city-muniicpality/"+m).then(function(t){let a=[];t.data.forEach(u=>{a.push({id:u.brgyCode,name:h(u.brgyDesc)})}),q.value=a})}function h(m){return m.toLowerCase().replace(/\b[a-z]/g,function(t){return t.toUpperCase()})}return(m,t)=>(p(),f(R,null,[l(s(L),{title:"Users"}),l(G,null,{default:V(()=>[o("div",T,[W,o("form",{onSubmit:t[22]||(t[22]=j(a=>D(),["prevent"])),class:"tw-mt-6 tw-space-y-6 md:tw-col-span-1"},[Q,o("div",X,[o("div",null,[l(r,{for:"",value:"Photo",class:"tw-mb-1"}),o("input",{type:"file",accept:"image/*",onInput:$,class:"",id:"photo",hidden:""},null,32),w.value?(p(),f("div",Y,[o("img",{src:w.value,class:"tw-w-44 tw-max-h-44 tw-object-contain tw-mb-2"},null,8,Z),s(e).photo?(p(),f("div",ee,[o("p",te,"File name: "+F(s(e).photo.name),1),o("p",le,"Size: "+F((s(e).photo.size/1024).toFixed(2))+"KB",1)])):v("",!0)])):v("",!0),o("div",se,[o("button",{onClick:t[0]||(t[0]=a=>N()),type:"button",class:"tw-h-8 tw-bg-blue-500 hover:tw-bg-blue-600 tw-text-white tw-rounded-lg tw-px-3 tw-text-sm"}," Browse File "),w.value?(p(),f("button",{key:0,onClick:t[1]||(t[1]=a=>A()),type:"button",class:"tw-h-8 tw-bg-red-500 hover:tw-bg-red-600 tw-text-white tw-rounded-lg tw-px-3 tw-text-sm"}," Remove ")):v("",!0)]),l(d,{class:"tw-mt-2",message:s(e).errors.photo},null,8,["message"])])]),o("div",ae,[o("div",null,[l(r,{for:"first_name",value:"First Name",required:""}),l(n,{id:"first_name",type:"text",class:"tw-mt-1 tw-block tw-w-full",modelValue:s(e).first_name,"onUpdate:modelValue":t[2]||(t[2]=a=>s(e).first_name=a),required:"",autocomplete:"first_name"},null,8,["modelValue"]),l(d,{class:"tw-mt-2",message:s(e).errors.first_name},null,8,["message"])]),o("div",null,[l(r,{for:"middle_name",value:"Middle Name"}),l(n,{id:"middle_name",type:"text",class:"tw-mt-1 tw-block tw-w-full",modelValue:s(e).middle_name,"onUpdate:modelValue":t[3]||(t[3]=a=>s(e).middle_name=a),autocomplete:"middle_name"},null,8,["modelValue"]),l(d,{class:"tw-mt-2",message:s(e).errors.middle_name},null,8,["message"])])]),o("div",oe,[o("div",null,[l(r,{for:"last_name",value:"Last Name",required:""}),l(n,{id:"last_name",type:"text",class:"tw-mt-1 tw-block tw-w-full",modelValue:s(e).last_name,"onUpdate:modelValue":t[4]||(t[4]=a=>s(e).last_name=a),required:"",autocomplete:"last_name"},null,8,["modelValue"]),l(d,{class:"tw-mt-2",message:s(e).errors.last_name},null,8,["message"])]),o("div",null,[l(r,{for:"suffix_name",value:"Suffix Name"}),l(n,{id:"suffix_name",type:"text",class:"tw-mt-1 tw-block tw-w-full",modelValue:s(e).suffix_name,"onUpdate:modelValue":t[5]||(t[5]=a=>s(e).suffix_name=a),autocomplete:"suffix_name"},null,8,["modelValue"]),l(d,{class:"tw-mt-2",message:s(e).errors.suffix_name},null,8,["message"])])]),o("div",ie,[o("div",null,[l(r,{for:"gender",value:"Gender",required:""}),l(n,{id:"gender",type:"text",class:"tw-mt-1 tw-block tw-w-full",modelValue:s(e).gender,"onUpdate:modelValue":t[6]||(t[6]=a=>s(e).gender=a),required:"",autocomplete:"gender"},null,8,["modelValue"]),l(d,{class:"tw-mt-2",message:s(e).errors.gender},null,8,["message"])]),o("div",null,[l(r,{for:"citizenship",value:"Citizenship",required:""}),l(n,{id:"citizenship",type:"text",class:"tw-mt-1 tw-block tw-w-full",modelValue:s(e).citizenship,"onUpdate:modelValue":t[7]||(t[7]=a=>s(e).citizenship=a),required:"",autocomplete:"citizenship"},null,8,["modelValue"]),l(d,{class:"mt-2",message:s(e).errors.citizenship},null,8,["message"])])]),o("div",de,[o("div",null,[l(r,{for:"religion",value:"Religion"}),l(n,{id:"religion",type:"text",class:"tw-mt-1 tw-block tw-w-full",modelValue:s(e).religion,"onUpdate:modelValue":t[8]||(t[8]=a=>s(e).religion=a),autocomplete:"religion"},null,8,["modelValue"]),l(d,{class:"tw-mt-2",message:s(e).errors.religion},null,8,["message"])]),o("div",null,[l(r,{for:"civil_status",value:"Civil Status",required:""}),l(n,{id:"civil_status",type:"text",class:"tw-mt-1 tw-block tw-w-full",modelValue:s(e).civil_status,"onUpdate:modelValue":t[9]||(t[9]=a=>s(e).civil_status=a),required:"",autocomplete:"civil_status"},null,8,["modelValue"]),l(d,{class:"mt-2",message:s(e).errors.civil_status},null,8,["message"])])]),o("div",re,[o("div",null,[l(r,{for:"date_of_birth",value:"Birthday",required:""}),l(n,{id:"date_of_birth",type:"date",class:"tw-mt-1 tw-block tw-w-full",modelValue:s(e).date_of_birth,"onUpdate:modelValue":t[10]||(t[10]=a=>s(e).date_of_birth=a),required:"",autocomplete:"date_of_birth"},null,8,["modelValue"]),l(d,{class:"tw-mt-2",message:s(e).errors.date_of_birth},null,8,["message"])]),o("div",null,[l(r,{for:"place_of_birth",value:"Place of Birth"}),l(n,{id:"place_of_birth",type:"text",class:"tw-mt-1 tw-block tw-w-full",modelValue:s(e).place_of_birth,"onUpdate:modelValue":t[11]||(t[11]=a=>s(e).place_of_birth=a),autocomplete:"place_of_birth"},null,8,["modelValue"]),l(d,{class:"mt-2",message:s(e).errors.place_of_birth},null,8,["message"])])]),ne,me,o("div",ue,[o("div",null,[l(r,{for:"email",value:"Email address",required:""}),l(n,{id:"email",type:"email",class:"tw-mt-1 tw-block tw-w-full",modelValue:s(e).email,"onUpdate:modelValue":t[12]||(t[12]=a=>s(e).email=a),required:"",autocomplete:"email"},null,8,["modelValue"]),l(d,{class:"mt-2",message:s(e).errors.email},null,8,["message"])]),o("div",null,[l(r,{for:"contact_number",value:"Contact Number"}),l(n,{id:"contact_number",type:"text",class:"tw-mt-1 tw-block tw-w-full",modelValue:s(e).contact_number,"onUpdate:modelValue":t[13]||(t[13]=a=>s(e).contact_number=a),autocomplete:"contact_number"},null,8,["modelValue"]),l(d,{class:"tw-mt-2",message:s(e).errors.contact_number},null,8,["message"])])]),ce,we,o("div",pe,[o("div",null,[l(r,{for:"province_id",value:"Province",required:""}),l(y,{id:"province_id",items:U.value,"onUpdate:modelValue":t[14]||(t[14]=a=>s(e).province_id=a.id),"model-value":s(e).province_id},null,8,["items","model-value"]),l(d,{class:"mt-2",message:s(e).errors.province_id},null,8,["message"])]),o("div",null,[l(r,{for:"city_id",value:"City/Municipality",required:""}),l(y,{id:"city_id",items:k.value,"onUpdate:modelValue":t[15]||(t[15]=a=>s(e).city_id=a.id),"model-value":s(e).city_id,"reset-index":x.value,"onUpdate:resetIndex":t[16]||(t[16]=a=>x.value=a)},null,8,["items","model-value","reset-index"]),l(d,{class:"mt-2",message:s(e).errors.city_id},null,8,["message"])])]),o("div",_e,[o("div",null,[l(r,{for:"barangay_id",value:"Barangay",required:""}),l(y,{id:"barangay_id",items:q.value,"onUpdate:modelValue":t[17]||(t[17]=a=>s(e).barangay_id=a.id),"model-value":s(e).barangay_id,"reset-index":g.value,"onUpdate:resetIndex":t[18]||(t[18]=a=>g.value=a)},null,8,["items","model-value","reset-index"]),l(d,{class:"mt-2",message:s(e).errors.barangay_id},null,8,["message"])])]),fe,ge,o("div",ve,[o("div",null,[l(r,{for:"role",value:"Role",required:""}),l(y,{id:"role",items:[{id:1,name:"Admin"},{id:2,name:"Faculty"}],"onUpdate:modelValue":t[19]||(t[19]=a=>s(e).role=a.id),"model-value":s(e).role},null,8,["model-value"]),l(d,{class:"mt-2",message:s(e).errors.role},null,8,["message"])])]),m.$page.props.auth.user.roles[0].name=="Admin"?(p(),f("div",ye,[o("div",null,[l(r,{for:"password",value:"New Password"}),l(n,{id:"password",type:"password",class:"tw-mt-1 tw-block tw-w-full",modelValue:s(e).password,"onUpdate:modelValue":t[20]||(t[20]=a=>s(e).password=a),autocomplete:"password"},null,8,["modelValue"]),l(d,{class:"tw-mt-2",message:s(e).errors.password},null,8,["message"])]),o("div",null,[l(r,{for:"password_confirmation",value:"Confirm Password"}),l(n,{id:"password_confirmation",type:"password",class:"tw-mt-1 tw-block tw-w-full",modelValue:s(e).password_confirmation,"onUpdate:modelValue":t[21]||(t[21]=a=>s(e).password_confirmation=a),autocomplete:"password_confirmation"},null,8,["modelValue"]),l(d,{class:"tw-mt-2",message:s(e).errors.password_confirmation},null,8,["message"])])])):v("",!0),o("div",be,[l(K,{href:"/"+b,type:"secondary"},{default:V(()=>[I(" Back ")]),_:1},8,["href"]),l(J,{disabled:s(e).processing},{default:V(()=>[I(" Save ")]),_:1},8,["disabled"])])],32)])]),_:1})],64))}};export{Ne as default};
