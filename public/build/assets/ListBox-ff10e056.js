import{j as M,r as L,k as x,K as V,p as ee,o as z,J as U,E as Q,F as Y,l as te,i as le,n as D,m as ae,a as N,q as J,w as E,e as T,b as A,d as I,t as W,T as oe,c as G,v as ne,x as K,B as ie,M as se}from"./app-c77c7403.js";import{u as P,y as ue,S as re,h as de,o as w,c as pe,l as H,V as ve,P as j,w as ce,t as q,p as fe,R as X,I as be,a as m}from"./use-outside-click-de4d3e2a.js";import{x as me,a as h,b as we,u as xe}from"./use-tracked-pointer-bed7fbaa.js";import{f as ge,a as ye}from"./hidden-50d99975.js";import{d as he,e as Se,r as Oe,a as Re}from"./ChevronUpDownIcon-7ae066e0.js";function Le(t,f){return t===f}var Ve=(t=>(t[t.Open=0]="Open",t[t.Closed=1]="Closed",t))(Ve||{}),ke=(t=>(t[t.Single=0]="Single",t[t.Multi=1]="Multi",t))(ke||{}),Ie=(t=>(t[t.Pointer=0]="Pointer",t[t.Other=1]="Other",t))(Ie||{});function Pe(t){requestAnimationFrame(()=>requestAnimationFrame(t))}let Z=Symbol("ListboxContext");function F(t){let f=ae(Z,null);if(f===null){let v=new Error(`<${t} /> is missing a parent <Listbox /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(v,F),v}return f}let Te=M({name:"Listbox",emits:{"update:modelValue":t=>!0},props:{as:{type:[Object,String],default:"template"},disabled:{type:[Boolean],default:!1},by:{type:[String,Function],default:()=>Le},horizontal:{type:[Boolean],default:!1},modelValue:{type:[Object,String,Number,Boolean],default:void 0},defaultValue:{type:[Object,String,Number,Boolean],default:void 0},name:{type:String,optional:!0},multiple:{type:[Boolean],default:!1}},inheritAttrs:!1,setup(t,{slots:f,attrs:v,emit:g}){let e=L(1),u=L(null),c=L(null),d=L(null),s=L([]),l=L(""),a=L(null),O=L(1);function S(o=n=>n){let n=a.value!==null?s.value[a.value]:null,r=be(o(s.value.slice()),y=>w(y.dataRef.domRef)),p=n?r.indexOf(n):null;return p===-1&&(p=null),{options:r,activeOptionIndex:p}}let k=x(()=>t.multiple?1:0),[R,B]=he(x(()=>t.modelValue===void 0?P(k.value,{[1]:[],[0]:void 0}):t.modelValue),o=>g("update:modelValue",o),x(()=>t.defaultValue)),i={listboxState:e,value:R,mode:k,compare(o,n){if(typeof t.by=="string"){let r=t.by;return(o==null?void 0:o[r])===(n==null?void 0:n[r])}return t.by(o,n)},orientation:x(()=>t.horizontal?"horizontal":"vertical"),labelRef:u,buttonRef:c,optionsRef:d,disabled:x(()=>t.disabled),options:s,searchQuery:l,activeOptionIndex:a,activationTrigger:O,closeListbox(){t.disabled||e.value!==1&&(e.value=1,a.value=null)},openListbox(){t.disabled||e.value!==0&&(e.value=0)},goToOption(o,n,r){if(t.disabled||e.value===1)return;let p=S(),y=me(o===h.Specific?{focus:h.Specific,id:n}:{focus:o},{resolveItems:()=>p.options,resolveActiveIndex:()=>p.activeOptionIndex,resolveId:C=>C.id,resolveDisabled:C=>C.dataRef.disabled});l.value="",a.value=y,O.value=r??1,s.value=p.options},search(o){if(t.disabled||e.value===1)return;let n=l.value!==""?0:1;l.value+=o.toLowerCase();let r=(a.value!==null?s.value.slice(a.value+n).concat(s.value.slice(0,a.value+n)):s.value).find(y=>y.dataRef.textValue.startsWith(l.value)&&!y.dataRef.disabled),p=r?s.value.indexOf(r):-1;p===-1||p===a.value||(a.value=p,O.value=1)},clearSearch(){t.disabled||e.value!==1&&l.value!==""&&(l.value="")},registerOption(o,n){let r=S(p=>[...p,{id:o,dataRef:n}]);s.value=r.options,a.value=r.activeOptionIndex},unregisterOption(o){let n=S(r=>{let p=r.findIndex(y=>y.id===o);return p!==-1&&r.splice(p,1),r});s.value=n.options,a.value=n.activeOptionIndex,O.value=1},select(o){t.disabled||B(P(k.value,{[0]:()=>o,[1]:()=>{let n=V(i.value.value).slice(),r=V(o),p=n.findIndex(y=>i.compare(r,V(y)));return p===-1?n.push(r):n.splice(p,1),n}}))}};ue([c,d],(o,n)=>{var r;i.closeListbox(),re(n,de.Loose)||(o.preventDefault(),(r=w(c))==null||r.focus())},x(()=>e.value===0)),ee(Z,i),pe(x(()=>P(e.value,{[0]:H.Open,[1]:H.Closed})));let b=x(()=>{var o;return(o=w(c))==null?void 0:o.closest("form")});return z(()=>{U([b],()=>{if(!b.value||t.defaultValue===void 0)return;function o(){i.select(t.defaultValue)}return b.value.addEventListener("reset",o),()=>{var n;(n=b.value)==null||n.removeEventListener("reset",o)}},{immediate:!0})}),()=>{let{name:o,modelValue:n,disabled:r,...p}=t,y={open:e.value===0,disabled:r,value:R.value};return Q(Y,[...o!=null&&R.value!=null?Se({[o]:R.value}).map(([C,$])=>Q(ge,ve({features:ye.Hidden,key:C,as:"input",type:"hidden",hidden:!0,readOnly:!0,name:C,value:$}))):[],j({ourProps:{},theirProps:{...v,...ce(p,["defaultValue","onUpdate:modelValue","horizontal","multiple","by"])},slot:y,slots:f,attrs:v,name:"Listbox"})])}}});M({name:"ListboxLabel",props:{as:{type:[Object,String],default:"label"},id:{type:String,default:()=>`headlessui-listbox-label-${q()}`}},setup(t,{attrs:f,slots:v}){let g=F("ListboxLabel");function e(){var u;(u=w(g.buttonRef))==null||u.focus({preventScroll:!0})}return()=>{let u={open:g.listboxState.value===0,disabled:g.disabled.value},{id:c,...d}=t,s={id:c,ref:g.labelRef,onClick:e};return j({ourProps:s,theirProps:d,slot:u,attrs:f,slots:v,name:"ListboxLabel"})}}});let De=M({name:"ListboxButton",props:{as:{type:[Object,String],default:"button"},id:{type:String,default:()=>`headlessui-listbox-button-${q()}`}},setup(t,{attrs:f,slots:v,expose:g}){let e=F("ListboxButton");g({el:e.buttonRef,$el:e.buttonRef});function u(l){switch(l.key){case m.Space:case m.Enter:case m.ArrowDown:l.preventDefault(),e.openListbox(),D(()=>{var a;(a=w(e.optionsRef))==null||a.focus({preventScroll:!0}),e.value.value||e.goToOption(h.First)});break;case m.ArrowUp:l.preventDefault(),e.openListbox(),D(()=>{var a;(a=w(e.optionsRef))==null||a.focus({preventScroll:!0}),e.value.value||e.goToOption(h.Last)});break}}function c(l){switch(l.key){case m.Space:l.preventDefault();break}}function d(l){e.disabled.value||(e.listboxState.value===0?(e.closeListbox(),D(()=>{var a;return(a=w(e.buttonRef))==null?void 0:a.focus({preventScroll:!0})})):(l.preventDefault(),e.openListbox(),Pe(()=>{var a;return(a=w(e.optionsRef))==null?void 0:a.focus({preventScroll:!0})})))}let s=we(x(()=>({as:t.as,type:f.type})),e.buttonRef);return()=>{var l,a;let O={open:e.listboxState.value===0,disabled:e.disabled.value,value:e.value.value},{id:S,...k}=t,R={ref:e.buttonRef,id:S,type:s.value,"aria-haspopup":"listbox","aria-controls":(l=w(e.optionsRef))==null?void 0:l.id,"aria-expanded":e.disabled.value?void 0:e.listboxState.value===0,"aria-labelledby":e.labelRef.value?[(a=w(e.labelRef))==null?void 0:a.id,S].join(" "):void 0,disabled:e.disabled.value===!0?!0:void 0,onKeydown:u,onKeyup:c,onClick:d};return j({ourProps:R,theirProps:k,slot:O,attrs:f,slots:v,name:"ListboxButton"})}}}),Be=M({name:"ListboxOptions",props:{as:{type:[Object,String],default:"ul"},static:{type:Boolean,default:!1},unmount:{type:Boolean,default:!0},id:{type:String,default:()=>`headlessui-listbox-options-${q()}`}},setup(t,{attrs:f,slots:v,expose:g}){let e=F("ListboxOptions"),u=L(null);g({el:e.optionsRef,$el:e.optionsRef});function c(l){switch(u.value&&clearTimeout(u.value),l.key){case m.Space:if(e.searchQuery.value!=="")return l.preventDefault(),l.stopPropagation(),e.search(l.key);case m.Enter:if(l.preventDefault(),l.stopPropagation(),e.activeOptionIndex.value!==null){let a=e.options.value[e.activeOptionIndex.value];e.select(a.dataRef.value)}e.mode.value===0&&(e.closeListbox(),D(()=>{var a;return(a=w(e.buttonRef))==null?void 0:a.focus({preventScroll:!0})}));break;case P(e.orientation.value,{vertical:m.ArrowDown,horizontal:m.ArrowRight}):return l.preventDefault(),l.stopPropagation(),e.goToOption(h.Next);case P(e.orientation.value,{vertical:m.ArrowUp,horizontal:m.ArrowLeft}):return l.preventDefault(),l.stopPropagation(),e.goToOption(h.Previous);case m.Home:case m.PageUp:return l.preventDefault(),l.stopPropagation(),e.goToOption(h.First);case m.End:case m.PageDown:return l.preventDefault(),l.stopPropagation(),e.goToOption(h.Last);case m.Escape:l.preventDefault(),l.stopPropagation(),e.closeListbox(),D(()=>{var a;return(a=w(e.buttonRef))==null?void 0:a.focus({preventScroll:!0})});break;case m.Tab:l.preventDefault(),l.stopPropagation();break;default:l.key.length===1&&(e.search(l.key),u.value=setTimeout(()=>e.clearSearch(),350));break}}let d=fe(),s=x(()=>d!==null?d.value===H.Open:e.listboxState.value===0);return()=>{var l,a,O,S;let k={open:e.listboxState.value===0},{id:R,...B}=t,i={"aria-activedescendant":e.activeOptionIndex.value===null||(l=e.options.value[e.activeOptionIndex.value])==null?void 0:l.id,"aria-multiselectable":e.mode.value===1?!0:void 0,"aria-labelledby":(S=(a=w(e.labelRef))==null?void 0:a.id)!=null?S:(O=w(e.buttonRef))==null?void 0:O.id,"aria-orientation":e.orientation.value,id:R,onKeydown:c,role:"listbox",tabIndex:0,ref:e.optionsRef};return j({ourProps:i,theirProps:B,slot:k,attrs:f,slots:v,features:X.RenderStrategy|X.Static,visible:s.value,name:"ListboxOptions"})}}}),_e=M({name:"ListboxOption",props:{as:{type:[Object,String],default:"li"},value:{type:[Object,String,Number,Boolean]},disabled:{type:Boolean,default:!1},id:{type:String,default:()=>`headlessui-listbox.option-${q()}`}},setup(t,{slots:f,attrs:v,expose:g}){let e=F("ListboxOption"),u=L(null);g({el:u,$el:u});let c=x(()=>e.activeOptionIndex.value!==null?e.options.value[e.activeOptionIndex.value].id===t.id:!1),d=x(()=>P(e.mode.value,{[0]:()=>e.compare(V(e.value.value),V(t.value)),[1]:()=>V(e.value.value).some(i=>e.compare(V(i),V(t.value)))})),s=x(()=>P(e.mode.value,{[1]:()=>{var i;let b=V(e.value.value);return((i=e.options.value.find(o=>b.some(n=>e.compare(V(n),V(o.dataRef.value)))))==null?void 0:i.id)===t.id},[0]:()=>d.value})),l=x(()=>({disabled:t.disabled,value:t.value,textValue:"",domRef:u}));z(()=>{var i,b;let o=(b=(i=w(u))==null?void 0:i.textContent)==null?void 0:b.toLowerCase().trim();o!==void 0&&(l.value.textValue=o)}),z(()=>e.registerOption(t.id,l)),te(()=>e.unregisterOption(t.id)),z(()=>{U([e.listboxState,d],()=>{e.listboxState.value===0&&(!d.value||P(e.mode.value,{[1]:()=>{s.value&&e.goToOption(h.Specific,t.id)},[0]:()=>{e.goToOption(h.Specific,t.id)}}))},{immediate:!0})}),le(()=>{e.listboxState.value===0&&(!c.value||e.activationTrigger.value!==0&&D(()=>{var i,b;return(b=(i=w(u))==null?void 0:i.scrollIntoView)==null?void 0:b.call(i,{block:"nearest"})}))});function a(i){if(t.disabled)return i.preventDefault();e.select(t.value),e.mode.value===0&&(e.closeListbox(),D(()=>{var b;return(b=w(e.buttonRef))==null?void 0:b.focus({preventScroll:!0})}))}function O(){if(t.disabled)return e.goToOption(h.Nothing);e.goToOption(h.Specific,t.id)}let S=xe();function k(i){S.update(i)}function R(i){!S.wasMoved(i)||t.disabled||c.value||e.goToOption(h.Specific,t.id,0)}function B(i){!S.wasMoved(i)||t.disabled||!c.value||e.goToOption(h.Nothing)}return()=>{let{disabled:i}=t,b={active:c.value,selected:d.value,disabled:i},{id:o,value:n,disabled:r,...p}=t,y={id:o,ref:u,role:"option",tabIndex:i===!0?void 0:-1,"aria-disabled":i===!0?!0:void 0,"aria-selected":d.value,disabled:void 0,onClick:a,onFocus:O,onPointerenter:k,onMouseenter:k,onPointermove:R,onMousemove:R,onPointerleave:B,onMouseleave:B};return j({ourProps:y,theirProps:p,slot:b,attrs:v,slots:f,name:"ListboxOption"})}}});const Ce={class:"tw-relative tw-mt-1"},Ee={class:"tw-flex tw-items-center"},Ae={class:"tw-block tw-truncate"},Me={class:"tw-pointer-events-none tw-absolute tw-inset-y-0 tw-right-0 tw-ml-3 tw-flex tw-items-center tw-pr-2"},je={class:"tw-flex tw-items-center"},Ke={__name:"ListBox",props:{items:{type:Array,required:!0,default:[]},modelValue:null,resetIndex:{type:Boolean,default:!1}},emits:["update:modelValue","update:resetIndex"],setup(t,{emit:f}){const v=t,g=[{id:null,name:"Select"}],e=x(()=>[...g,...v.items]);let u=L(e.value[0]);if(v.modelValue){const c=e.value.findIndex(d=>d.id==parseInt(v.modelValue));u.value=c<1?e.value[0]:e.value[c]}return U(()=>_.cloneDeep(v.items),(c,d)=>{if(v.modelValue){const s=e.value.findIndex(l=>l.id==parseInt(v.modelValue));u.value=s<1?e.value[0]:e.value[s]}}),U(()=>_.cloneDeep(v.resetIndex),(c,d)=>{u.value=e.value[0],f("update:resetIndex",!1)}),(c,d)=>(N(),J(I(Te),{as:"div",modelValue:I(u),"onUpdate:modelValue":[d[0]||(d[0]=s=>se(u)?u.value=s:u=s),d[1]||(d[1]=s=>f("update:modelValue",s))]},{default:E(()=>[T("div",Ce,[A(I(De),{class:"tw-relative tw-w-full tw-cursor-default tw-rounded-md tw-border tw-border-gray-300 tw-bg-white tw-pl-3 tw-pr-10 tw-text-left tw-shadow-sm focus:tw-border-pink-800 focus:tw-outline-none focus:tw-ring-1 focus:tw-ring-pink-800 sm:tw-text-sm tw-h-11"},{default:E(()=>[T("span",Ee,[T("span",Ae,W(I(u).name),1)]),T("span",Me,[A(I(Oe),{class:"tw-h-5 tw-w-5 tw-text-gray-400","aria-hidden":"true"})])]),_:1}),A(oe,{"leave-active-class":"tw-transition tw-ease-in tw-duration-100","leave-from-class":"tw-opacity-100","leave-to-class":"tw-opacity-0"},{default:E(()=>[A(I(Be),{class:"tw-absolute tw-z-10 tw-mt-1 tw-max-h-56 tw-w-full tw-overflow-auto tw-rounded-md tw-bg-white tw-py-1 tw-text-base tw-shadow-lg tw-ring-1 tw-ring-black tw-ring-opacity-5 focus:tw-outline-none sm:tw-text-sm"},{default:E(()=>[(N(!0),G(Y,null,ne(I(e),s=>(N(),J(I(_e),{as:"template",key:s.id,value:s},{default:E(({active:l,selected:a})=>[T("li",{class:K([l?"tw-text-white tw-bg-blue-600":"tw-text-gray-900","tw-relative tw-cursor-default tw-select-none tw-py-2 tw-pl-3 tw-pr-9"])},[T("div",je,[T("span",{class:K([a?"tw-font-semibold":"tw-font-normal","tw-block tw-truncate"])},W(s.name),3)]),a?(N(),G("span",{key:0,class:K([l?"tw-text-white":"tw-text-blue-600","tw-absolute tw-inset-y-0 tw-right-0 tw-flex tw-items-center tw-pr-4"])},[A(I(Re),{class:"tw-h-5 tw-w-5","aria-hidden":"true"})],2)):ie("",!0)],2)]),_:2},1032,["value"]))),128))]),_:1})]),_:1})])]),_:1},8,["modelValue"]))}};export{Ke as _};
