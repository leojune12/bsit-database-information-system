import{_ as B}from"./AuthenticatedLayout-ff5f8feb.js";import{r as P,P as V}from"./Pagination-57daf012.js";import{r as _,u as A,a as l,c as d,b as s,d as n,w,F as m,H as D,e,g as u,v as x,x as N,t as i,L as f,q as $,B as g}from"./app-43b201f5.js";import{S as h}from"./sweetalert2.all-b5239eb9.js";import{_ as y}from"./LinkComponent-32bf0b04.js";import{_ as E}from"./TextInput-f6cf8a59.js";import{r as j}from"./PlusIcon-1cfa9cd2.js";import"./use-outside-click-4fa20e03.js";import"./use-tracked-pointer-e6240226.js";import"./_plugin-vue_export-helper-c27b6911.js";import"./ChevronRightIcon-d4e8d2ec.js";const F={class:"tw-flex tw-flex-col md:tw-flex-row tw-mb-4 md:tw-justify-between md:tw-items-center tw-gap-y-4"},H=e("h3",{class:"tw-text-xl tw-font-bold tw-leading-6 tw-text-gray-700"}," Sections ",-1),I={class:"tw-flex tw-gap-3"},L={class:"tw-flex"},q={class:"tw-overflow-x-auto tw-mb-4"},O={class:"tw-min-w-full"},T={class:"tw-border tw-bg-indigo-500 tw-text-sm tw-font-medium tw-text-white"},Y={class:"border"},z={class:"tw-px-6 tw-py-3 tw-whitespace-nowrap tw-text-sm tw-font-medium tw-text-gray-900"},U={class:"tw-text-sm tw-text-gray-900 tw-font-light tw-px-6 tw-py-3 tw-whitespace-nowrap"},G={class:"tw-text-sm tw-text-gray-900 tw-font-light tw-px-6 tw-py-3 tw-whitespace-nowrap"},J={class:"tw-text-sm tw-text-gray-900 tw-font-light tw-px-6 tw-py-3 tw-whitespace-nowrap"},K={class:"tw-text-sm tw-text-gray-900 tw-font-light tw-px-6 tw-py-3 tw-whitespace-nowrap"},M={class:"tw-text-sm tw-text-gray-900 tw-font-light tw-px-6 tw-py-3 tw-whitespace-nowrap"},Q={class:"tw-text-sm tw-text-gray-900 tw-font-light tw-px-6 tw-py-3 tw-whitespace-nowrap"},R={class:"tw-flex tw-gap-2"},W=["onClick"],ct={__name:"Index",props:{response:Object},setup(b){const a=b,v=_([{title:"ID",class:"tw-py-3 tw-px-6 tw-text-left"},{title:"Name",class:"tw-py-3 tw-px-6 tw-text-left"},{title:"Year",class:"tw-py-3 tw-px-6 tw-text-left"},{title:"Students",class:"tw-py-3 tw-px-6 tw-text-left"},{title:"Academic Year",class:"tw-py-3 tw-px-6 tw-text-left"},{title:"Curriculum",class:"tw-py-3 tw-px-6 tw-text-left"},{title:"Actions",class:"tw-py-3 tw-px-6 tw-text-left"}]),o="sections",p=_(""),k=A({});function C(r){h.fire({title:"Are you sure?",showCancelButton:!0,confirmButtonColor:"#d33",confirmButtonText:"Delete"}).then(c=>{c.isConfirmed&&S(r)})}function S(r){let c=Array.isArray(r)?Object.keys(r).map(t=>r[t].id):[r];k.transform(()=>({id_array:c})).delete(route(o+".destroy",r),{preserveScroll:!0,onSuccess:()=>{h.fire({title:"Deleted successfully",confirmButtonColor:"#16a34a"})},onError:t=>{h.fire({title:"Something went wrong",text:"Please refresh the page.",icon:"error",confirmButtonColor:"#d33"})}})}return(r,c)=>(l(),d(m,null,[s(n(D),{title:"Sections"}),s(B,null,{default:w(()=>[e("div",F,[H,e("div",I,[e("div",L,[s(E,{id:"id_number",type:"text",class:"tw-block tw-w-full tw-border-r-0 tw-rounded-r-none tw-ring-0 tw-rounded-lg tw-border-2",modelValue:p.value,"onUpdate:modelValue":c[0]||(c[0]=t=>p.value=t),required:"",autocomplete:"id_number",placeholder:"Search Name"},null,8,["modelValue"]),s(y,{href:p.value?"/"+o+"/?search="+p.value:"/"+o,type:"success-outlined",class:"tw-h-11 tw-rounded-l-none",title:"Search"},{default:w(()=>[s(n(P),{class:"tw-h-6 tw-w-6"})]),_:1},8,["href"])]),s(y,{href:o+"/create",type:"success-outlined",class:"tw-h-11"},{default:w(()=>[s(n(j),{class:"tw-block tw-h-5 tw-w-5","aria-hidden":"true"}),u(" New Section ")]),_:1},8,["href"])])]),e("div",q,[e("table",O,[e("thead",T,[e("tr",null,[(l(!0),d(m,null,x(v.value,t=>(l(),d("th",{key:t.title,class:N(t.class)},i(t.title),3))),128))])]),e("tbody",Y,[(l(!0),d(m,null,x(a.response.data,t=>(l(),d("tr",{key:t.id,class:"tw-bg-white tw-border-b tw-transition tw-duration-300 tw-ease-in-out hover:tw-bg-gray-100"},[e("td",z,i(t.id),1),e("td",U,i(t.name),1),e("td",G,i(t.year),1),e("td",J,i(t.students.length),1),e("td",K,[s(n(f),{class:"tw-text-blue-600 hover:tw-underline",href:"/academic-years/"+t.academic_year_id},{default:w(()=>[u(i(t.academic_year.name),1)]),_:2},1032,["href"])]),e("td",M,[s(n(f),{class:"tw-text-blue-600 hover:tw-underline",href:"/curriculums/"+t.curriculum_id},{default:w(()=>[u(i(t.curriculum.name),1)]),_:2},1032,["href"])]),e("td",Q,[e("div",R,[s(n(f),{href:o+"/"+t.id,class:"tw-text-green-500 hover:tw-text-green-600 tw-transition tw-duration-300 tw-ease-in-out",title:"View"},{default:w(()=>[u(" View ")]),_:2},1032,["href"]),r.$page.props.auth.user.roles[0].name=="Admin"?(l(),$(n(f),{key:0,href:o+"/"+t.id+"/edit",class:"tw-text-blue-600 hover:tw-text-blue-700 tw-transition tw-duration-300 tw-ease-in-out",title:"Edit"},{default:w(()=>[u(" Edit ")]),_:2},1032,["href"])):g("",!0),r.$page.props.auth.user.roles[0].name=="Admin"?(l(),d("a",{key:1,href:"#",class:"tw-text-red-500 hover:tw-text-red-600 tw-transition tw-duration-300 tw-ease-in-out",title:"Delete",onClick:X=>C(t.id)}," Delete ",8,W)):g("",!0)])])]))),128))])])]),s(V,{totalPages:a.response.last_page??0,perPage:a.response.per_page??0,currentPage:a.response.current_page??0,from:a.response.from??0,to:a.response.to??0,total:a.response.total??0,url:o},null,8,["totalPages","perPage","currentPage","from","to","total"])]),_:1})],64))}};export{ct as default};
